"use strict";const form_url="telegram.php";function ajax(e,t=null){$.ajax({type:"POST",url:form_url,data:e,success:function(e){"success"!==e?alert("Ошибка отправки формы!"):(null!==t&&t(),thank_you())},error:function(){alert("Ошибка отправки формы!")}})}function thank_you(){window.location="/thankyou.html"}$(document).ready((function(){$(".preloader-wrap").find(".preloader").fadeOut().end().delay(400).fadeOut("slow"),$('a[href^="#"]').bind("click.smoothscroll",(function(e){e.preventDefault();var t=this.hash,n=$(t);$("html, body").stop().animate({scrollTop:n.offset().top},500,"swing",(function(){}))})),$("#main-form-phone").inputmask({mask:"+38 (999) 999-9999"}),document.getElementById("send-request").addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("main-form-name").value,n=document.getElementById("main-form-phone").value.replace(/[^+\d]/g,"");""!==t&&13===n.length&&ajax({type:"request",name:t,phone:n},(function(){document.getElementById("main-form-name").value="",document.getElementById("main-form-phone").value=""}))}));let e=document.querySelectorAll(".step"),t={type:"calculator",square:"25",ceiling_type:"1",extra_elements:[],contact_type:"4",phone:""};function n(){return parseInt(t.square)>5&&parseInt(t.square)<=50}function l(){return t.ceiling_type>0&&t.ceiling_type<=8}function o(){return n()&&l()&&t.contact_type>0&&t.contact_type<=4&&function(){const e=13===t.phone.length;return e||alert("Введите номер телефона полностью"),e}()}let c=document.querySelectorAll(".btn-next");c[0].addEventListener("click",(function(t){n()&&(e[c[0].dataset.num].style.left="0%",e[c[0].dataset.num-1].style.left="-100%",window.innerWidth<=992&&(document.querySelector(".steper").style.height="78rem"),window.innerWidth<=576&&(document.querySelector(".steper").style.height="67rem"),window.innerWidth<=425&&(document.querySelector(".steper").style.height="59rem"))})),c[1].addEventListener("click",(function(t){l()&&(e[c[1].dataset.num].style.left="0%",e[c[1].dataset.num-1].style.left="-100%",document.querySelector(".steper").style.height="50rem")})),c[2].addEventListener("click",(function(n){t.phone=document.querySelector("#calc-phone").value.replace(/[^+\d]/g,""),o()&&ajax(t,(function(){e[c[2].dataset.num].style.left="0%",e[c[2].dataset.num-1].style.left="-100%"}))})),document.getElementById("square").addEventListener("input",(function(){document.getElementById("square-val").innerText=this.value,t.square=this.value}));for(let e=1;e<=8;e++)document.getElementById("calc-type-"+e.toString()).addEventListener("click",(function(n){for(let e=1;e<=8;e++)document.getElementById("calc-type-"+e.toString()).classList.remove("calc-block-active");this.classList.add("calc-block-active"),t.ceiling_type=e.toString()}));for(let e=1;e<=4;e++)document.getElementById("calc-contact-"+e.toString()).addEventListener("click",(function(n){for(let e=1;e<=4;e++)document.getElementById("calc-contact-"+e.toString()).classList.remove("calc-block-active");this.classList.add("calc-block-active"),t.contact_type=e.toString()}));$("#calc-phone").inputmask({mask:"+38 (999) 999-9999"});let a=!1,u="";function i(e){let t=["Обычный","Тканевый","Apply","Парящий","Фотопечать","Световые линии","Уровневый","Звездное небо"];e>0&&e<=8&&!a&&(document.getElementById("ceiling-type-name").innerText=t[e-1],$(".modal-window-bg").fadeIn(),document.querySelector("body").style.overflowY="hidden",a=!0,u=t[e-1])}function d(){a&&($(".modal-window-bg").fadeOut(400,(()=>{document.getElementById("ceiling-type-name").innerText=""})),document.querySelector("body").style.overflowY="visible",a=!1,u="",document.getElementById("name-modal").value="",document.getElementById("phone-modal").value="")}for(let e=0;e<8;e++)document.querySelectorAll(".order-btn")[e].addEventListener("click",(function(t){i(e+1)}));document.getElementById("send-modal").addEventListener("click",(function(e){e.preventDefault();let t=document.getElementById("name-modal").value.trim(),n=document.getElementById("phone-modal").value.replace(/[^+\d]/g,"");""!==t&&13===n.length&&""!==u&&ajax({type:"modal",name:t,phone:n,ceiling_type:u},(function(){d()}))})),document.querySelector(".close-btn").addEventListener("click",(function(e){d()})),$("#phone-modal").inputmask({mask:"+38 (999) 999-9999"}),$(document).mouseup((function(e){let t=$(".modal-window");t.is(e.target)||0!==t.has(e.target).length||d()})),$(".popup-close").click((function(e){e.preventDefault()})),$(".popup").click((function(e){e.preventDefault()}))}));